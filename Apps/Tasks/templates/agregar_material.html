{% extends 'template.html' %}

{% block body %}
<h1 class="h1">{{titulo}}</h1>
<div class="container d-flex justify-content-center m-5">
    <div class="container w-50">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            
            <div class="mb-3">
                <label for="tx_titulo" class="form-label">Título</label>
                <input type="text" class="form-control" id="tx_titulo" name="tx_titulo" maxlength="100" placeholder="Ingrese el título del recurso" required>
            </div>

            <div class="mb-3">
                <label for="tx_descripcion" class="form-label">Descripción</label>
                <textarea class="form-control" id="tx_descripcion" name="tx_descripcion" rows="4" placeholder="Describa el recurso" required></textarea>
            </div>

            <div class="mb-3">
                <label for="tx_curso" class="form-label">Curso</label>
                <select class="form-select" id="tx_curso" name="tx_curso" required>
                    {% for curso in cursos %}
                        <option value="{{ curso.id }}">{{ curso.nombre }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="mb-3">
                <label for="tx_archivos" class="form-label">Archivo</label>
                <input type="file" class="form-control" id="tx_archivos" name="tx_archivos">
            </div>

            <div class="mb-3">
                <label for="tx_link" class="form-label">Enlace</label>
                <input type="url" class="form-control" id="tx_link" name="tx_link" placeholder="Ingrese un enlace (opcional)">
            </div>

            <button type="submit" class="btn btn-primary">Guardar</button>
        </form>
    </div>
</div>
<div class="container m-5">
    <h2 class="h2">Estos son los materiales actuales disponibles</h2>
    <table class="table table-striped">
        <thead>
            <tr>
                <th scope="col">Título</th>
                <th scope="col">Descripción</th>
                <th scope="col">Curso</th>
                <th scope="col">Archivo</th>
                <th scope="col">Enlace</th>
            </tr>
        </thead>
        <tbody>
            {% for material in materiales %}
                <tr>
                    <td>{{ material.titulo }}</td>
                    <td>{{ material.descripcion }}</td>
                    <td>{{ material.curso }}</td>
                    <td>
                        {% if material.archivos %}
                            <a href="{{ material.archivos.url }}" target="_blank">Ver</a>
                        {%else%}
                            No disponible
                        {% endif %}
                    </td>
                    <td>
                        
                        {% if material.link %}
                            <a href="{{ material.link }}" target="_blank">Ver</a>
                        {%else%}
                            No disponible
                        {% endif %}
                            
                    </td>
                </tr>
            {% endfor %}
        </tbody>
</div>
{% endblock %}